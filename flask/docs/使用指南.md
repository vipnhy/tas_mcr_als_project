# TAS MCR-ALS 分析平台 - 使用指南

<div align="center">
  <h3>🔬 先进的瞬态吸收光谱在线分析工具</h3>
  <p>基于多元曲线分辨-交替最小二乘法(MCR-ALS)的专业光谱分析平台</p>
  
  <img alt="Platform" src="https://img.shields.io/badge/Platform-Web-blue">
  <img alt="Python" src="https://img.shields.io/badge/Python-3.8+-green">
  <img alt="Flask" src="https://img.shields.io/badge/Flask-3.1.0-red">
  <img alt="License" src="https://img.shields.io/badge/License-MIT-yellow">
</div>

## 📖 目录
- [平台概述](#平台概述)
- [界面展示](#界面展示)
- [功能特性](#功能特性)
- [使用教程](#使用教程)
- [分析结果](#分析结果)
- [常见问题](#常见问题)

---

## 🔬 平台概述

TAS MCR-ALS 分析平台是一个专业的在线瞬态吸收光谱(Transient Absorption Spectroscopy)数据分析工具，基于多元曲线分辨-交替最小二乘法(Multivariate Curve Resolution - Alternating Least Squares)算法。该平台将复杂的光谱分析算法封装为简单易用的在线工具，让研究人员无需编程基础即可进行高质量的数据分析。

### 🎯 设计目标
- **简化操作流程**：将复杂的MCR-ALS算法封装为简单的Web操作
- **提升分析效率**：自动化的数据处理和结果可视化  
- **降低使用门槛**：无需编程基础即可进行专业光谱分析
- **增强协作性**：基于Web的平台便于团队协作和数据共享

---

## ✨ 功能特性

### 🚀 核心功能

#### 1. 数据上传与处理
- **多格式支持**：CSV、TXT、DAT文件格式
- **拖拽上传**：直观的拖放式文件上传界面
- **实时验证**：自动检测文件格式和数据完整性
- **大文件支持**：最大支持50MB的数据文件

#### 2. 参数配置
- **预设配置**：
  - 快速分析：适合初步数据预览
  - 标准分析：平衡精度与速度
  - 详细分析：高精度深度分析
  - 自定义配置：完全自由的参数设置
- **灵活参数**：
  - 组分数量（1-10个）
  - 最大迭代次数（10-1000次）
  - 波长范围自定义
  - 时间延迟范围设置

#### 3. 实时分析监控
- **进度跟踪**：实时显示分析进度
- **状态更新**：详细的分析步骤信息
- **日志记录**：完整的分析过程日志
- **错误处理**：智能的错误检测和提示

#### 4. 结果可视化
- **专业图表**：
  - 浓度轮廓图
  - 纯光谱图
  - LOF收敛曲线
  - 数据对比图
- **交互预览**：在线图表预览功能
- **多语言标签**：中英文图表标签支持

#### 5. 数据管理
- **结果下载**：支持PNG图表和CSV数据下载
- **历史记录**：完整的分析历史管理
- **会话管理**：支持重复查看和重新分析
- **批量操作**：一键下载所有结果

---

## 🖥️ 界面展示

### 1. 主页界面

主页采用现代化的响应式设计，清晰展示平台功能和使用流程：

<div align="center">
  <img src="img/主页界面.jpeg" alt="TAS MCR-ALS 分析平台主页界面" width="800">
  <p><em>图1: 平台主页界面 - 现代化设计展示功能特性</em></p>
</div>

**界面特色：**
- 🎨 **渐变色彩设计**：采用蓝色渐变的专业配色方案
- 📱 **响应式布局**：完美适配桌面和移动设备
- 🚀 **功能特性展示**：6大核心功能卡片式展示
- 📋 **使用流程指引**：4步操作流程清晰指引
- 🎯 **行动召唤按钮**：醒目的"开始分析"引导按钮

### 2. 文件上传界面

专业的文件上传页面，支持拖拽和点击两种上传方式：

<div align="center">
  <img src="img/文件上传界面.jpeg" alt="TAS数据文件上传界面" width="800">
  <p><em>图2: 文件上传界面 - 支持拖拽上传和参数配置</em></p>
</div>

**上传功能：**
- 📁 **拖拽上传区域**：大尺寸的文件拖放区域
- 📄 **多格式支持**：CSV、TXT、DAT文件格式
- ⚡ **实时文件验证**：自动检测文件格式和大小
- ⚙️ **参数预设选择**：快速/标准/详细三种预设配置
- 🔧 **自定义配置**：完全可调的分析参数设置

### 3. 分析进度界面

实时监控分析进度的动态界面：

<div align="center">
  <img src="img/分析进度界面.jpeg" alt="MCR-ALS分析进度监控界面" width="800">
  <p><em>图3: 分析进度界面 - 实时监控分析状态和收敛过程</em></p>
</div>

**监控特性：**
- 📊 **进度可视化**：直观的进度条和百分比显示
- 🔄 **步骤指示器**：清晰的分析步骤状态展示
- 📝 **实时日志窗口**：详细的分析过程日志记录
- 📈 **收敛监控**：LOF值实时变化监控
- ⏹️ **操作控制**：支持中途停止分析

### 4. 结果展示界面

专业的分析结果展示和管理界面：

<div align="center">
  <img src="img/结果展示界面.jpeg" alt="分析结果展示和下载界面" width="800">
  <p><em>图4: 结果展示界面 - 图表预览、数据下载和会话管理</em></p>
</div>

**结果管理：**
- 📊 **图表预览**：浓度轮廓图和纯光谱图在线预览
- 💾 **文件下载**：PNG图表和CSV数据文件下载
- 📋 **分析摘要**：关键分析参数和质量指标展示
- 🗂️ **批量操作**：一键下载所有结果文件
- 📚 **会话管理**：历史分析记录查看和管理

---

## 📚 使用教程

### 第一步：访问平台

1. 在浏览器中打开平台地址：`http://localhost:5000`
2. 查看主页介绍和功能特性
3. 点击 **"开始分析"** 按钮进入上传页面

### 第二步：上传数据文件

1. **拖拽上传**：
   - 将TAS数据文件拖拽到上传区域
   - 支持格式：`.csv`、`.txt`、`.dat`
   - 文件大小限制：50MB以内

2. **点击上传**：
   - 点击上传区域选择本地文件
   - 确认文件信息显示正确

3. **数据格式要求**：
   ```
   Time/Wavelength, 350nm, 351nm, 352nm, ...
   0.1ps,          0.001,  0.002,  0.003
   0.2ps,          0.002,  0.003,  0.004
   ...
   ```

### 第三步：配置分析参数

#### 预设配置选择
- **🚀 快速分析**：2组分，50次迭代，适合数据预览
- **⚙️ 标准分析**：3组分，100次迭代，推荐日常使用  
- **🔬 详细分析**：4组分，200次迭代，高精度分析

#### 自定义配置
可以精确设置以下参数：
- **组分数量**：1-10个组分
- **最大迭代次数**：10-1000次
- **波长范围**：自定义起始和结束波长
- **延迟范围**：自定义时间延迟范围
- **界面语言**：中文/英文切换

### 第四步：运行分析

1. 点击 **"开始分析"** 按钮
2. 系统自动跳转到进度监控页面
3. 观察实时分析进度和日志信息
4. 等待分析完成（通常1-5分钟）

### 第五步：查看和下载结果

分析完成后，您可以：

1. **📊 在线预览图表**：
   - 浓度轮廓图：各组分随时间变化
   - 纯光谱图：各组分吸收光谱特征
   - LOF收敛图：算法收敛过程

2. **💾 下载分析数据**：
   - 高清PNG图表文件
   - CSV格式数值数据
   - 分析参数配置文件

3. **📚 管理分析历史**：
   - 查看历史分析记录
   - 重新运行分析
   - 删除不需要的会话

---

## 📊 分析结果解读

### 图表类型说明

#### 1. 浓度轮廓图 (Concentration Profiles)
显示各化学组分随时间的浓度变化：

```
浓度 ↑
    │    ╭─╮ 激发态 (组分1)
1.0 │   ╱   ╲
    │  ╱     ╲
0.8 │ ╱       ╲
    │╱         ╲___
0.6 │              ╲___ 中间态 (组分2)
    │         ╱─╲       ╲___
0.4 │        ╱   ╲           ╲
    │   ╱───╱     ╲           ╲
0.2 │  ╱           ╲___        ╲
    │ ╱                 ╲___    ╲ 基态产物 (组分3)
0.0 └─────────────────────────────→ 时间(ps)
    0.1    1    10   100  1000
```

**解读要点：**
- 不同颜色曲线代表不同化学组分
- 显示光化学反应的动力学过程
- 可识别反应中间体和最终产物

#### 2. 纯光谱图 (Pure Spectra)
显示各组分的特征吸收光谱：

```
吸光度 ↑
      │     ╱─╲ 激发态吸收
 0.04 │    ╱   ╲ (组分1)
      │   ╱     ╲
 0.02 │  ╱       ╲
      │ ╱         ╲____
 0.00 │╱               ╲____
      │                     ╲____
-0.02 │        ╱──╲              ╲ 受激发射
      │       ╱    ╲ (组分2)       ╲ (组分3)
-0.04 │      ╱      ╲               ╲
      └─────────────────────────────────→ 波长(nm)
      400   450   500   550   600   650
```

**解读要点：**
- 正值：激发态吸收或基态漂白
- 负值：受激发射
- 光谱形状反映分子电子态特征

#### 3. LOF收敛曲线
监控算法收敛质量：

```
LOF(%) ↑
      │
  95  │ ●
      │  ╲
  90  │   ●●●
      │      ╲●●●
  85  │          ●●●●●●●
      │                 ●●●●●●●●●●●
  80  │                            ●●●●●
      │                                 ●●●
  75  └────────────────────────────────────→ 迭代次数
      0   10   20   30   40   50   60   70
```

**质量评估标准：**
- **优秀**：LOF < 5%
- **良好**：LOF 5-10%
- **可接受**：LOF 10-20%
- **需优化**：LOF > 20%

---

## ❓ 常见问题

### 💾 数据上传相关

**Q: 支持哪些文件格式？**  
A: 支持CSV、TXT、DAT格式的文本文件，数据应为制表符或逗号分隔。

**Q: 数据格式有什么要求？**  
A: 第一行为标题行，第一列为时间延迟，后续列为不同波长的吸光度数据。

**Q: 文件大小限制是多少？**  
A: 单个文件最大支持50MB，建议文件大小在10MB以内以获得最佳性能。

### ⚙️ 分析参数相关

**Q: 如何选择合适的组分数量？**  
A: 建议从2-3个组分开始，根据拟合质量(LOF)和化学知识调整。过多组分可能导致过拟合。

**Q: 最大迭代次数设置多少合适？**  
A: 一般100-200次足够，如果未收敛，建议检查数据质量或调整参数。

**Q: 如何设置波长和延迟范围？**  
A: 根据实验条件设置，确保覆盖有效信号区域，避免噪声较大的边缘区域。

### 📊 结果解读相关

**Q: 如何判断分析结果的可靠性？**  
A: 综合考虑LOF值、光谱形状合理性、浓度轮廓的物理意义等多个方面。

**Q: LOF值多少算好？**  
A: 一般低于5%为优秀，5-10%为良好，10-20%为可接受。

**Q: 图表无法正常显示怎么办？**  
A: 检查浏览器兼容性，清除缓存后重试，或下载图表文件查看。

### 🔧 技术问题

**Q: 分析速度较慢怎么办？**  
A: 可减少数据点数量、降低迭代次数、使用快速分析模式。

**Q: 浏览器兼容性如何？**  
A: 推荐使用Chrome、Firefox、Safari等现代浏览器。

**Q: 如何保存分析结果？**  
A: 可下载所有结果文件，系统自动保存最近的分析历史。

---

## 📈 应用案例

### 案例1：有机太阳能电池材料
- **样品**：聚合物给体-受体共混膜
- **分析目标**：电荷分离动力学
- **组分识别**：激子态、电荷转移态、自由载流子

### 案例2：光催化材料
- **样品**：TiO₂纳米颗粒悬浮液
- **分析目标**：光生载流子动力学
- **组分识别**：导带电子、价带空穴、表面态

### 案例3：生物大分子
- **样品**：蛋白质色氨酸荧光
- **分析目标**：蛋白质构象变化
- **组分识别**：天然态、中间态、去折叠态

---

## 🔗 扩展阅读

- **MCR-ALS算法原理**：[Tauler, R. Chemom. Intell. Lab. Syst. 1995]
- **瞬态吸收光谱技术**：[Berera, R. et al. Photosynth. Res. 2009]
- **光谱数据分析方法**：[Jaumot, J. et al. Chemom. Intell. Lab. Syst. 2005]

---

*最后更新时间：2025年8月28日*  
*版本：v1.0.0*  
*平台作者：TAS-MCR-ALS开发团队*
